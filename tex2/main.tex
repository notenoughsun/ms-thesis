% -*- Mode:TeX -*-

%% The documentclass options along with the pagestyle can be used to generate
%% a technical report, a draft copy, or a regular thesis.  You may need to
%% re-specify the pagestyle after you \include  cover.tex.  For more
%% information, see the first few lines of sk-thesis.cls. 

% DRAFT MODE uses simpler front page, without dedication, acknowledgements, uses a footer sying draft.
%\documentclass[12pt,a4paper,vi,twoside,leftblank]{sk-thesis}
%\documentclass[12pt,a4paper,vi,draft]{sk-thesis}
\documentclass[12pt,a4paper,vi]{sk-thesis}
\usepackage[utf8]{inputenc}
\usepackage{geometry}
\usepackage{amsmath}
\geometry{a4paper, right=15mm, bottom=20mm, left=30mm, top=20mm}

\usepackage{ifdraft}
\usepackage{graphicx}
\setkeys{Gin}{draft=false} % disable hiding graphics in draft mode
\usepackage[table]{xcolor}
\usepackage{multicol, multirow}
\usepackage{amsmath, amssymb}
\usepackage{cmap}
\usepackage[T1]{fontenc}
\setlength {\marginparwidth }{2.5cm} 
\usepackage[obeyDraft]{todonotes}
\usepackage{booktabs, siunitx}
\usepackage[breaklinks=true]{hyperref}
\usepackage{breakcites}
\usepackage[nottoc,numbib,numindex]{tocbibind}
\usepackage[numbers]{natbib} 
\usepackage{bibentry}
\usepackage{doi}
\definecolor{navyblue}{rgb}{0.0, 0.0, 0.5}
%\definecolor{royalblue}{rgb}{0.06, 0.11, 0.42}
\hypersetup{
  final,
  colorlinks=true,
  urlcolor=navyblue,
  citecolor=navyblue,
  linkcolor=navyblue
}
\usepackage{cleveref}
\crefformat{footnote}{#2\footnotemark[#1]#3}
\usepackage{catoptions}
\input{Autoref.tex}
\usepackage{textcomp}
\usepackage{fancyhdr}
\newcommand{\changefont}{%
    \fontsize{10}{10}\selectfont
}
\fancyhf{}
%\fancyhead[LE]{\slshape \rightmark} %section
%\fancyhead[RE]{}
%\fancyhead[RO]{\slshape \leftmark} % chapter
%\fancyhead[LO]{}
\fancyhead[LE,RO]{\changefont \slshape \nouppercase{\rightmark}} %section
\fancyhead[RE,LO]{\changefont \slshape \nouppercase{\leftmark}} %chapter
\fancyfoot[C]{\thepage} %footer
\usepackage{datetime}
\usepackage[automake,toc]{glossaries}
\glsenablehyper
\makeglossaries
%\usepackage{comment}
\usepackage{subcaption}
\usepackage{tabularx, lscape, rotating}
\usepackage[most]{tcolorbox}
\newtcolorbox{myframe}[1][]{
  enhanced,
  top=12pt,bottom=12pt,left=16pt,right=16pt,
  arc=0pt,
  outer arc=0pt,
  colback=white,
  boxrule=1pt,
  #1
}

%%%%%%%%%%%% EPIGRAPH
\usepackage{epigraph}
%\setlength{\beforeepigraphskip}{1.0\baselineskip}
\setlength{\epigraphrule}{0pt}
\setlength{\epigraphwidth}{.4\textwidth}
%\setlength{\afterepigraphskip}{.25\baselineskip}
\renewcommand{\textflush}{flushepinormal}

% multiline table columns
\usepackage{array}
\newcolumntype{L}{>{\centering\arraybackslash}m{8cm}}
% https://stackoverflow.com/questions/790932/how-to-wrap-text-in-latex-tables
    
\ifdraft{
    %% LIMIT CHAPTERS
    \includeonly{
        prelude,
        contents,
        chapters/introduction,
        chapters/background,
        chapters/roadmap,
        chapters/thesis-objectives,
        chapters/methodology,
        chapters/conclusion,
        glossary,
        bibliography,
        chapters/appendix-a
    }
}{
}

\begin{document}

\ifdraft{
    %%%%%%%%%%% HEADERS AND FOOTERS
    \fancypagestyle{plain}{%
      \fancyhf{}%
      \renewcommand{\headrulewidth}{0pt}% Line at the header invisible
      \fancyfoot[L]{\changefont PhD Thesis - Student Name} % DRAFT ONLY
      \fancyfoot[C]{\thepage}% \changefont 
      \fancyfoot[R]{\changefont \textbf{DRAFT} \today} % DRAFT ONLY
    }
    \fancyfoot[L]{\changefont PhD Thesis - Student Name} % DRAFT ONLY
    \fancyfoot[R]{\changefont \textbf{DRAFT} \today} % DRAFT ONLY
    \pagestyle{fancy}
    
    %% SIMPLE TITLE PAGE
    \include{prelude}
}{
    %% FULL TITLE PAGE
    \include{cover}
    
    %%%%%%%%%%% HEADERS AND FOOTERS
    \fancypagestyle{plain}{%
      \fancyhf{}%
      \renewcommand{\headrulewidth}{0pt}% Line at the header invisible
      \fancyfoot[C]{\thepage}%
    }
    \pagestyle{fancy}
}
\include{contents}

% introduction
% toc
\include{chapters/introduction}

\include{chapters/background}
% motivation
% state of the art systems
% 
\include{chapters/roadmap}
% Taking decision of technology / product choice - Understanding physical limits. Highlighting the landscape of related technologies.

% system design & architecture
% 
\include{chapters/thesis-objectives}
% background, what is system, what features, how does it works

\include{chapters/methodology}
% data processing
% slam and graph minimization
% factor graphs, distance function, graph matching
% trajectory generation
% walking model
% 
% map construction
% observations to map (approximation, regressinon), map to observations (as a sensor)
% (sensor model), propagation model, slam / sam
% 
% conditioning on magnetic field data
% what graphs / figures can be plotted
\include{chapters/conclusion}

\include{glossary}
\include{bibliography}

\appendix
\include{chapters/appendix-a}

\end{document}

