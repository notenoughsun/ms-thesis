
:stem: latexmath

// ====
// A statement of the methodology for the thesis project that defines specific design of the procedures, data collection, analysis, and (or) interpretation. Illustrate how the method you have chosen best allows you to fulfill the purpose of the thesis project.
// ====

// First we define the current state of the art, we build the model for existing technologies, analyze products on the market, list key players and IP owners, create Pareto frontier. This part is intended  to  make  a  visible  and  understandable  landscape  of this technology segment.
// // To develop the right product, we first have to identify its figures of merit.
// // When the figures of merits stated, we have to choose the right technology. First we develop the framework for technology choice.

// // We do a theoretical research, from which we decide on a technology and methods. This we call a roadmap, because it gives us some prior assumptions of next series of steps to be done.

// .The road map:
// * show the evolution of IPS technology
// ** repeat the research of indoor positioning systems review (example, one of the most useful for now) or other IPS publications
// ** visualize IPS usage and work principles (different technologies, connections, FOMs, applications)
// * create financial and technical models for different IPS technologies
// * calculate the possible effect of merging different technologies for different applications
// ** calculate in FOMs / prices (novelty)
// * connect different technologies into single model (where possible)
// * create system / strategy for optimal* technology choice decision
// ** map / compare existing products and trends over defined figures of merit



// // image:/home/tim/Downloads/inndoor%20navigation/img/image2020-5-29_23-2-21.png[]

// .Preparation landscape research
// First, we define the current state of the art, we build the model for existing technologies, analyze products on the market, list key players and IP owners, create Pareto frontier. This part is intended to make a visible and understandable landscape of this technology segment.

// // A statement of the methodology for the thesis project that defines the specific design of the procedures, data collection, analysis, and (or) interpretation. Illustrate how the method you have chosen best allows you to fulfill the purpose of the thesis project.

// .Procedures list
// * Collection of magnetic fingerprints database with smartphone sensors: Gyroscope, compass, IMU.
// * Implementation of localization model
// * Experiments using model, estimation of accuracy
// * Implementation of possible techniques, benchmarking
// * SLAM model development, re-localization technique, map-merging
// * Fine-tuning of SLAM model
// * Comparison to other products, interpretation of results

// // Illustrate how the method you have chosen best allows you to fulfill the purpose

// // The method we have chosen is reasonable


Problem: SLAM algorithm with no odometry available.

We have a Markov process. After processing to the point with high confidence we may recalculate all previous positions - close loop.

Close loop examples??????

Reestimate previous coordinates - regression task.





\section{measurements model}

acceleration data from imu \\
magnetic field orientation vector \\
RSSI

Consider the process is Markovian.

\section{Transition model definition}

Copied all from \cite{articleXia}:

With  the  development  of  microelectromechanical  systems(MEMS),  a  few  MEMS-based  sensors  have  been  built  and
incorporated  into  smartphones:  accelerometers,  gyroscopes,magnetometers,  etc.  These  sensors  can  be  used  to  provide information  on  the  user’s  actions.  Pedestrian  dead  reckon-ing  (PDR)  [10]  is  a  relative  navigation  technique  that  uses these sensors.

we propose a PDR-based  indoor positioningmethod  that  integrates  RSSI  with  indoor  environment  mapconstraints by using particle filters.

PDR-based indoor positioning can be expressed by the following equations

// asciimath:[]

latexmath:[
\begin{equation}
    X_k = \
    \begin{bmatrix} 
        x_{t-1} \\
        y_{t-1} 
    \end{bmatrix} = \
    \begin{bmatrix} 
        x_{t-1} &+ l_k \sin(\theta_t) \\
        y_{t-1} &+ l_k \cos(\theta_t) 
    \end{bmatrix} + \
    \begin{bmatrix} 
        \delta_{x} \\
        \delta_{y} 
    \end{bmatrix}
\end{equation}
]

The orientation  updates is independent from $X_k$ updates, depends on accelerometer and gyro, same model.

Step   Detection:Android   mobile   phones   have   two kinds  of  sensors  to  monitor  steps:  step  counters  and  step detectors [25]. 

Peak detection is used in this paper for step detection

nonlinear step length estimation model based on statistics proposed by Weinberg [27]
latexmath:[
\begin{equation}
    step_{size} = k \sqrt^4{a_{z max} - a_{z min}}
\end{equation}
]
The Android system computes orientation angles by using the  device’s  geomagnetic  sensors  in  combination  with  its accelerometers   [25].   Using   these   two   hardware   sensors,the  system  provides  data  for  the  following  three  orientation angles

The  device is NOT  assumed to  be pointing in the heading direction. Need to apply additional space transformation.

\subsection{RSSI methode}

Usual path-loss model:

\begin{equation}
    PL(d) = PL(d0) + 10 \alpha \log{d / d_0} + \omega = 
    PL(d0) + 10 \alpha \log{d / d_0} + N(0, \sigma^2_{\omega})
\end{equation}

where $d$ represents the Euclidean distance between the anchor node  and  the  receiver,d0represents  a  specified  distance,PL(d)and PL(d0)represent the RSSI at $d$ and $d_0$, respectively(in  dBm),  andαrepresents the  path  loss  exponent, which  is closely related to the ambient environment;ωis a zero-mean Gaussian distribution variable with variance $\sigma^2_{\omega}$.

The inverse function: 
\begin{equation}
    d_i = d_0 \cdot 10 \frac{PL(d_i) - PL(d_0)}{10\alpha}
\end{equation}

Landmark model:

\begin{align}
    f_i(x, y) &= d_i - \sqrt{(x - x_i)^2 + (y - y_i)^2} \\
    min(x, y) &= min \sum_{i=1}^{m}[f_i(x, y)]^2, m \ge 3.
\end{align}

In paper author transform this to linear system, 

\begin{align}
    AZ & = b \\
    A &= \begin{bmatrix} 
        1 - 2 x_1 - 2 y_1 \\
        ... \\
        1 - 2 x_m - 2 y_m
    \end{bmatrix} \\
    Z &= \begin{bmatrix} 
        x^2 + y^2 \\
        x \\
        y
    \end{bmatrix} \\
    b &= \begin{bmatrix} 
        d_1^2 - x_1^2 - y_2^2\\
        ...\\
        ...
    \end{bmatrix}
\end{align}

We have to check it

Good alternative was proposed in \cite{} to bound region by min and max RSSI according to its variance - linear system.

\subsection{Processing}

Update step, prediction, correction
State Estimation


Resample:In  this  step,  importance  resampling  [20]  isused to obtain a new particle set

some papers prove importance resampling can't be applied for this task because pf noise.
% observation equation:

\section{Crasy Idea}

There is some similarity in video compressing process

We strore gradients of changing signal measurements, we apply searching procedure to have a smooth measurements.

We have a convex magnetic field and a trajectory, 
the task is to find similar trajectrory with highest correlation to measurements.

Regression, approximation, pattern matching, Convolutions.

Gradients, blockmatching

Different approaches in papers, play on a toy model.
