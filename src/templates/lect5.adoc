:notitle:
:author: Чикичев Тимур Вадимович
:email: timur7002007@gmail.com
:source-highlighter: pygments
// :doctype: book
// :reproducible:
:pygments-style: monokai
:stem: latexmath
//asciimath
//latexmath
:blank: pass:[ +]
:toc:
//macro
// :toc-title: Содержание отчета
// :toc-start: 3
:imagesdir-old: {imagesdir}
// include::titul.adoc[]

<<<

toc::[]

// [options="header", width="100%", cols="1,3,6,6"]
// |============================
// |1|2|3|4
// |1 >s|2 |3 |4
// ^|5 2.2+^.^|6 .3+<.>m|7
// ^|8
// |9 2+>|10
// |============================

// [source,c]
// ----
// ----

// [float]
// The second day
// ~~~~~~~~~~~~~~
// Floating titles do not appear in a document’s table of contents

// [verse, Author, source]
// To see a world in a grain of sand,
// And a heaven in a wild flower,
// Hold infinity in the palm of your hand,
// And eternity in an hour.

// [TIP]
// This is an example TIP.
//
// [NOTE]
// This is an example note.
//
// [IMPORTANT]
// This is an example IMPORTANT.
//
// [WARNING]
// This is an example WARNING.

// [caption="Пример1: "]
// .Anexamplewithacustomcaption
// ======================================================
// Qui
// ======================================================

// [abstract]
// --
// Header
// --

// [horizontal]
// In::
// Lorem::  Fusce euismod commodo velit.

// :lab_dir: ../z3
// include::./ex_12_04.c[]

// :imagesdir: {lab_dir}/img

// :counter: image-counter : 2
// :counter: list-counter : 0
// :counter: image-number : 0

// .Список:
// - <<list_diff2, Описание>>
// - <<list_diff4, Описание>>

// [[list_diff2]]
// [caption="Рисунок {counter:image-counter}: "]
// image::Figure.png["image_1",title="зависимость"]

// stem:[
// \int_{-1}^{1}f(x)dx
// \approx
// \frac{5}{9}f(-\sqrt{\frac{3}{5}}) + \frac{8}{9}f(0) + \frac{5}{9}f(\sqrt{\frac{3}{5}})]
//
// stem:[\int_{a}^{b}f(x)dx \approx \sum_{i=1}^{n}c_{i}f(x_{i})]
//
// stem:[h \in [10^{-16}; 1] ]


= Коды перевода в безопасную позицию

перевод в машинный ноль:
G28 Xnn Ynn Znn

<<img 1>>

G30 - код перевода в позицию смены инструмента
(включает сброс всех коррекций на радмус и на длину.)

G91 G30 X0 Y0 Z200


=== Управление координатными системами

Выбор локальной системы координат.
54-59

G52 Xnn Ynn Znn - смещения новой СК относительно старой.


G52 X0 Y0 Z0 - сброс всех значений (коды не модальные, всегда в абсолютной СК).


Ступенчатые отверстия, перенос плоскости сверления.
Цикл сверления - быстрое перемещение к пл-ти сверления и далее перемещение на рабочей подаче.

[source=c]
|====
%
N10 G17 G21 G40 G49 G54 G80 G90
N20 M06 T1
N30 M03 S1000
N40 G43 H1 //компенсация длины интрумента
N50 G00 Z200
N60 G98 //цикл без плоскости отвода
N70 G81 X15 Y0 Z-10 F20
N80 G52 X0 Y0 Z15 //перенос ЛСК
N90 X30 Z-10
N100 G52 X0 Y0 Z30 //перенос ЛСК
N110 X45 Z-10
N120 G80
N130 G52 X0 Y0 Z0
N140 G91 G28 X0 Y0 Z0
N150 M05
N160 M30
%
|====


=== Перемещение в полярной СК

G17 XY
G18 XZ
G19 YZ

G16 - включает полярную СК

G17 - X - радиус, Y - угол поворота

остальные аналогично.

G15 - переход к метрическим координатам.

<<img3>>
//сверление отверстий по кругу
[source,bash]
----
%
N10 G17 G21 G40 G49 G54 G80 G90
N20 M06 T1
N30 M03 S1000
N40 G43 H1 //компенсация длины инcтрумента
N50 G00 Z200
N60 G98 //цикл без плоскости отвода
N70 G16
N80 G81 X50 Y0 Z-10 F20
N90 Y30
N100 Y60
N110 Y90
N120 Y120
N130 Y150
N140 Y180
N150 Y210
N160 Y240
N170 Y270
N180 Y300
N190 Y330
N200 G15 G80
N210 G52 X0 Y0 Z0
N220 G91 G28 X0 Y0 Z0
N230 M05
N240 M30
%
----


[source,bash]
----
%
N10 G17 G21 G40 G49 G54 G80 G91
N20 M06 T1
N30 M03 S1000
N40 G43 H1 //компенсация длины инcтрумента
N50 G00 Z200
N80 G52 X10 Y10 Z0 //перенос ЛСК
N60 G98 //цикл без плоскости отвода
N70 G81 X0 Y0 Z-10 F20  //стандартный цикл сверления
N80 X100
N90 X100
N100 Y200
N110 X-100
N120 X-100
N130 G80 M05
N140 G91 G30 X0 Y0 Z200
N150 M06 T2
N160 G43 H2
N170 M03 S1000
N180 G84 Y-200 F10
N190 X100
N200 X100
N210 Y200
N220 X-100
N230 X-100
N240 G80 M05 G28 X0 Y0 Z0
N250 M30
%
----



= Перемещение в многокоординатных станках
_03_12_18_

== Работа с поворотным столом
G00 X Y Z A B
G01 X Y Z A B F

<img1>

.сверление с поворотом стола
[source,bash]
----
%
N10 G17 G21 G40 G49 G54 G80 G90
N20 M06 T1
N30 G43 H1 //компенсация длины инcтрумента
N40 G00 Z200  //перемещение в позицию над деталью
N50 M03 S1000 //начало вращения шпинделя
N60 G98 //цикл без плоскости отвода
N70 G81 X25 Y0 Z0 Z-10 A0 B0 F20
N80 A30
N90 A60
N100 A90
....
N200 G80 //конец цикла
N201 G00 A-330//возврат в безопасную позицию и разворот стола
N210 G52 X0 Y0 Z0
N220 G91 G28 X0 Y0 Z0
N230 M05
N240 M30
%
----


M97 P L
P - номер кадра, с вызываемое подпрограммой
L - количество повторений

M98 P L - вызов подпрограммы, расположенной в другом файле
P - номер программы

M99 - возврат из подпрограммы

.пример вызова подпрограммы
[source,bash]
----
%
O005
N0 G17 G21 G49 G54;
N10 M97 P100
N20 G00 X30 P100  //goto1
 ...
N100 G01 X50 Y200 //label1
...
...
N350 M99; //return
...
N400 M30
%
----

.Рисунок 2
[source,bash]
----
%
O006
N10 G17 G21 G40 G49 G54 G80 G90
N20 M06 T1
N30 G43 H1 //компенсация длины инcтрумента
N40 M03 S1000
# N50 G00 Z200
N60 G00 X10 Y-10
Z0.5
N70 M98 P200
N80 G00 X40 Y-10
N70 M98 P200
N90 G00 X40 Y-40
N70 M98 P200
N100 G00 X10 Y-40
N70 M98 P200

M05 G91 G28 X0 Y0 Z100  //остановка
M30 //завершение
%

%O200
N00 G91 //подпрограмма
G99 G81 X5 Y0 Z-5 R0.5
X-5 Y-5
X-5 Y5
X5 Y5
G80
G90
M99
%
----


== Структурное программирование

Maito B - расширение G-code

=== Переменные

#2
#115
...

1-33 - локальные, видны только в пределах программы, только в пределах одного сеанса

100-999 - глобальные, действительны в течении работы станка

1000+ - системные

// #1 + #2 = #3 // 3:=2+1

G#115


.основные функции:
[options="header", .width="100%", .cols="1,8"]
|====
|Название|Формат записи
|Присваивание|#a = #b
|Сложение| #c = #a + #b
|Вычитание| #c = #a - #b
|Умножение| #c = #a * #b
|Деление| #c = #a / #b

|Синус|#c = sin[#b]
||#c = cos[#b]
||#c = TAN[#b]
||#c = SQRT[#b]
||#c = ABS[#b]
|Округление, отбрасывание дробной части|#c = ROUND[#b]
// ||
// ||
// ||
// ||
// ||
// ||
// ||
// ||
// ||
|====

.операторы:
[options="header", .width="100%", .cols="1,8"]
|====
|Оператор |Содержание
|EQ|=
|NE|!=
|GT|>
|GE|>=
|LT|<
|LE|<=
|====
