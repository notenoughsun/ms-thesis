Abstract—This   paper   introduces   a   mobile   navigation   and localization  system  suitable  to  guide  visitors  in  environments indoors  without  GPS  help.  This  guidance  is  especially  useful in  large  multilevel  structures  such  as  hospitals,  shopping  malls,airports, and can be beneficial for people with special needs. The system is implemented on smart phone platforms equipped with several  embedded  sensors.  The  proposed  localization  technique is based on a combination of (a) Wi-Fi signal strength capturing from pre-built sample area points and (b) a pedestrian step and stride  identification  using  embedded  sensory  data.  The  method has  been  implemented  and  tested  in  a  large  hospital  building.

//
// Although the problem of localizing wireless mobile sensor nodes has attracted notable attention in the last decade, designing a real-time and efficient solution for indoor area is still a challenging and open problem. The notable attention attracted by indoor localization recently is mostly due to the various emerging location based services (LBS), that can only be provided by knowing user's location, especially in indoor areas. According to studies since 1990s, it is reasonable to assume that more than 80% of human's life is spent in indoor area [32, 45].

//
// we propose and implement a crowdsourced based system to generate
// the radio map completely unsupervised, by exploiting information from the existing users
// that regularly walk in the area. The users do not need to provide any information such
// as labelling their current location or marking their walking path. We keep track of the
// users’ movements as well as scanning the RSS values while the users do not do any
// active contribution to the process. Once enough data is collected, we merge all of the
// users’ data, and build a radio map separately in an offline phase. Once the radio map
// is built (in an unsupervised and offline fashion), variety of supervised or semi-supervised
// localization techniques can be employed to perform the online localization task. Such
// system requires several main components that will be investigated and addressed in this
// work successively:

// Extracting location information from the floor map in the physical domain.
// • Extracting the location fingerprints of the indoor area in the RSS domain.
// • Modeling the building floor and the radio map as a graph.
// • Problem formulation as a graph matching problem and a proper solution for the
// problem.


Graph matching


// After representing the data on graphs, we define a graph matching problem, not only
// to generate the pathway map of the users via crowdsourced data, but also to automatically
// match the obtained pathway map to the floor plan with notable accuracy. To that aim, we
// have developed two graph matching techniques. For the first approach, we have defined
// a graph similarity measure and an efficient way to calculate it, along with an efficient
// matching algorithm we call K-best fits, which is a fast heuristic 1 . The second approach
// is a probabilistic method, based on hidden Markov models (HMM) 2 . The K-best fits
// algorithm uses the similarity of nodes based on their global topological location in the
// graph, while the HMM-based approach uses the local properties of nodes and edges for
// comparison

//
// As a further step, in order to relax the assumption about the availability of Wi-Fi
// signals, we also investigate the possibility of localization using the distortions of magnetic
// field waves, caused by the metal infrastructure of the buildings.


Our case: formulate situation with no wifi available data in local area

(A specific case of this problem)
The graph matching problem is the “maximum weighted bipartite
matching”,
// The graph matching (or edge independent set) problem is the problem of finding a
// subset of graph edges, such that none of the edges share vertices. This problem is
// more interesting on bipartite graphs, where the matching is similar to assigning the
// vertices of one part of the graph to another, with no vertex appearing twice in the
// assignment.

which is defined as a matching on a bipartite graph with maximum sum
of the weights of selected edges.

This problem is also known as the “assignment problem”.
We utilize factor Graphs for such assignment of new data.

// There are well-known algorithms for this problem such as the Hungarian
// algorithm (originally called by this name in [42]). Another method to solve this
// problem is to run the Bellman-Ford shortest path algorithm on an augmented
// graph.



Matching problem proposed:


We now describe the problem formulation by modeling two graphs:
// the ground truth graph which is built offline, based on the building map,
the ground truth graph (location based information - building map)
and the data graph,
// which is built in an unsupervised fashion,
constructed during the online training phase of system from the crowdsourced data of users walking in the
environment.

We do not obtain a radio map which is needed for RSS-based localization.
Instead, we collect a data-set of magnetic field fingerprints, tagged with their relative physical coordinates to previous position. This relative coordinates (graph type trajectory with approximate information on edges lengths).

// As mentioned previously, a radio map is needed for RSS-based localization, which
// consists of a data-set of RSS fingerprints, tagged with their physical coordinates (labeled
// points). In our approach, instead of manually building such data-set, we first define a
// graph, called the ground truth graph G T , that only contains the physical coordinates of
// specific points. Such graph can be easily built using a graphical interface and a given floor
// plan. These points have physical location labels, but no RSS fingerprints. Therefore, we
// define a second graph that is built from crowdsourced data. The second graph, called

From the data of two graphs: location map and fingerprints collection, we perform matching procedure, using multiple available methods.

The first procedure to apply is accept-reject method: all points in restricted location are blocked (person can't go through walls and etc.).
Secondly, we perform loop closure and data association using common algorithms:

* graph similarity algorithms (correlation, ...)
* probabilistic approach (hidden Markov models)
// graph similarity measure and an efficient way to calculate it, along with an efficient
// matching algorithm we call K-best fits, which is a fast heuristic 1 . The second approach
// is a probabilistic method, based on hidden Markov models (HMM)

Similarity measures:

What data we obtain in the data graph: heading, relative position, magnetic field direction.
For multiple locations in same domain there can be lots of point with same of similar magnetic field direction.
Instead, between any two points, there can be enough magnetic field disturbances, which will create enough information for distinguishing data, and mapping only location related data.

* We can measure the similarity only between long enough tracklets / edges
* The signal similarity measure cab be just a cross-covariance

// image::images/tocopy-22c0a.png[]

// see 2.6.1 Stable matching problem
// Inertial navigation systems


Measurement model
// In the crowdsourced version of our work, the concentration is primarily on building
// the data set via a graph model using graph matching techniques. Therefore, similar to
// [78], we manually set the stride length of each user in our implementations. Although
// setting the stride length to a constant value is not very accurate and the accuracy can
// benefit from thorough estimation of the stride length, it is shown in Chapter 3 that our
// matching algorithm is able to compensate for such inaccuracies, effectively.
